# web开发模式
目前主流的web开发模式有两种

- 基于服务器端渲染的传统web开发模式
- 基于前后端分离的新型web开发模式

## 服务器端渲染的web开发模式
服务器端渲染：服务器发送给客户端的html页面，是在服务器通过字符串的拼接，动态生成的。因此，客户端不需要用ajax这样的技术额外请求页面的数据

```js
app.get('/index.html',(req,res) => {
    // 1.要渲染的数据
    const user = {name:'zs',age:20}
    // 2. 服务器端通过字符串的拼接，动态生成html内容
    const html = `<h1>姓名：${user.name},年龄： ${user.age}</h1>`;
    // 3.把生成好的页面内容响应给客户端，因此，客户端拿到的好似带有真实数据的html，页面
    res.send(html);
})
```

## 服务器端渲染的优缺点
优点：
- 前端耗时少：因为服务器端负责动态生成html内容，浏览器只需要直接渲染页面就可以。尤其是移动端
- 有利于SEO: 因为服务器端响应的是完整的html页面内容，所以爬虫更容易爬取获得信息，更有利于SEO

缺点：
- 占用服务器端资源：服务器端完成html页面内容的拼接，如果请求较多，会对服务器端造成一定的压力
- 不利于前后端分离，开发效率低：使用服务器端渲染，则无法进行分工合作，尤其对于前端复杂高的项目，不利于项目高效开发

## 前后端分离开发
前后端分离：前后端分离的开发模式：依赖于ajax技术的广泛应用，简而言之，前后端分离的web开发模式，就是后端只负责提供api接口，前端使用ajax调用接口的开发模式。

优点：
- 开发体验好：前端专注于ui页面的开发，后段专注于api的开发，且前端有更多的选择性
- 用户体验好：ajax技术的广泛应用，极大的提高了用户的体验，可以轻松的实现页面的局部刷新。
- 减轻了服务器端的渲染压力，因为页面最终是在每个用于的浏览器中生成的。

缺点：
- 不利于SEO（搜索引擎优化），因为完整的html页面需要在客户端动态拼接下完成，所以爬虫对无法爬取页面的有效信息。
（解决方案，利于vue，react等前端框架SSR：服务器端渲染技术，能够很好的倔强SEO问题）


## 前后端身份认证

通过一定的手段，完成对用户身份的确认

在web开发中，涉及用户的身份认证：手机验证码登陆，邮箱密码登陆，二维码登陆

## 不同开发模式下的身份认证
对应服务器端渲染和前后端分离这两种开发模式来说，分别有着不同的身份认证方案：

- 服务器端渲染推荐使用session认证机制
- 前后端分离推荐使用Jwt认证机制

### session认证机制
1. http协议的无状态性
了解http协议的无状态是进一步学习session认证机制的必要前提。

http协议的无状态性，指的是客户端的每次http请求都是独立的，连续多个请求之间没有直接的关系，服务器不会主动保留每次http请求的状态

如何突破http无状态的限制

cookie

### 什么是cookie
cookie是存储在客户端浏览器中的一段不超过4kb的字符串，它由一个名称，一个值和其他几个用于控制cookie有效期，安全性，用于范围的可选属性性组成

不同域名下的cookie各种独立，每当客户端发起请求时，会自动把当前域名下所有未过期（expires）的cookie一起发送到服务器

- 自动发送（发请求时）
- 域名独立
- 过期时限
- 4kb限制

### cookie 在身份证中的作用
- 客户端第一次请求服务器的时候，服务器通过响应头的形式，向客户端发送一个身份认证的cookie，客户端会自动将cookie保存在浏览器中

- 当客户端再次请求服务器端数据的时候，浏览器会自动将身份认证相关的cookie，通过请求头的形式发给服务器端，服务器即可验明客户端的身份

### cookie不具有安全性

cookie是存储在浏览器中的，而且浏览器也提供了读写cookie的api，因此cookie很容易被伪造，不具有安全性，因此不建议服务器将重要的隐私数据，通过cookie的形式发送给浏览器。

cookie+session认证（服务器端认证）

### session 工作原理
1. 客户端-服务器端： 客户端登陆：提交账号和密码，服务器端严重账号和密码，将登陆成功后的用户信息存储在服务器的内存，同时生产对应的cookie字符串
2. 服务器端-客户端： 服务器端响应：将生产的cookie响应给客户端，浏览器端自动把cookie存储在当前域名下
3. 客户端-服务器端： 当客户端下一次进行请求的时候，通过请求头自动把当前域名下未过期的可用的cookie发生给服务器。
4. 服务器根据请求头的cookie从内存中观察者对应的用户信息，当前用户信息认证成功后，服务器端针对当前用户生成特定的响应内容。
5. 服务器端-客户端：把当前用户对应的页面内容响应给浏览器。






